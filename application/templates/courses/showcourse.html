{% extends "layout.html" %}

{% block body %}
        <center>
        <div class="container">
        <div class="card" style="width: 30rem;">
            <div class="card-body">
                <h5 class="card-title">{{course.name}}</h5>
                <p class="card-text">{{course.description}}</p>
                <div class="card-footer">{{course.core}} || {{course.ects}}</div>
            </div>
        </div>
        {% if current_user.is_authenticated %}
        <div class="btn-group" >
        <form method="POST" action="{{ url_for('comment_form', course_id=course.id) }}">
                    <input class="btn btn-primary" type="submit" value="Comment"/>
        </form>
        <form method="POST" action="{{ url_for('question_form', course_id=course.id) }}">
            <input class="btn btn-primary" type="submit" value="Add a Question"/>
        </form> 
        <form method="POST" action="{{ url_for('courses_update', course_id=course.id) }}">
                <input class="btn btn-secondary" type="submit" value="Edit information"/>
        </form>
        <form method="POST" action="{{ url_for('mark_course_as_taken', course_id=course.id, student_id=current_user.get_id()) }}">
            <input class="btn btn-danger" type="submit" value="I have taken this course"/>
        </form>
        </div>
        {% endif %}
        {% if comments is defined %}
        <hr/>
        <h4> Comments </h4>
        {% for comment in comments %} 
        <div class="card" style="width: 30rem;">
                <div class="card-body">
                    <h5 class="card-title">{{comment.text}} {{comment.id}}</h5>
                    <p class="card-text">{{comment.text}}</p>
                    <div class="card-footer">{{comment.grade}} || {{comment.workload}}</div>
                </div>
        </div>
        {% if current_user.is_authenticated %}
        {% if current_user.roles() == "A" %}
        <form method="POST" action="{{ url_for('delete_comment', comment_id=comment.id) }}">
                <input class="btn btn-danger" type="submit" value="Delete"/>
        </form>
        {% endif %}
        {% endif %}
        {% endfor %}
        {% endif %}
        {% if questions is defined %}
        <hr/>
        <h4> Questions </h4>
        {% for question in questions %} 
        <div class="card" style="width: 30rem;">
                <div class="card-body">
                    <h5 class="card-title">{{question.question}} {{question.id}}</h5>
                    <p class="card-text">{{question.answer}}</p>
                    <div class="card-footer">{{question.difficulty}}</div>
                </div>
        </div>
        {% endfor %}
        {% endif %}
    </div>
</center>
{% endblock %}